(this.webpackJsonpzatlas=this.webpackJsonpzatlas||[]).push([[0],{104:function(e,t,a){},166:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),o=a.n(l),i=(a(94),a(95),a(25)),c=a(40),s=a.n(c),u=a(24),m=a(86),p=a(8),f={SET_GLOBAL:"SET_GLOBAL",ADD_MAP:"ADD_MAP",DEL_MAP:"DEL_MAP",CLEAR_MAP:"CLEAR_MAP"},d={setGlobal:function(e){return{type:f.SET_GLOBAL,payload:e}},addMap:function(e){return{type:f.ADD_MAP,payload:e}},delMap:function(e){return{type:f.DEL_MAP,payload:e}},clearMap:function(){return{type:f.CLEAR_MAP}}},h=Object(p.a)({},f),g=Object(p.a)({},d),b={global:{seaLevel:2,colors:[2665084671,3420627967,4294622463,4224414463,3735245823]},maps:[]},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.SET_GLOBAL:return Object.assign({},e,{global:Object.assign({},e.global,t.payload)});case h.ADD_MAP:return Object.assign({},e,{maps:[].concat(Object(m.a)(e.maps),[t.payload])});case h.DEL_MAP:var a=[];return e.maps.forEach((function(e,n){n!==t.payload&&a.push(e)})),Object.assign({},e,{maps:a});case h.CLEAR_MAP:return Object.assign({},e,{maps:[]});default:return e}},y=Object(u.b)({heightmap:v});var E=Object(u.c)(y),k=a(3),O=a(4),j=a(6),w=a(5),x=a(7),C={cssMediaBp:[1024,768,480]},M={background:{content:"#ffffff",header:"#333333",footer:"#777777",panel:"#444444"},color:{content:"#111111",header:"#eeeeee",footer:"#ffffff",panel:"#efefef"},boxShadow:{mapCase:"#2288ee"}},A={content:{background:M.background.content,color:M.color.content}},S=function(e){function t(){return Object(k.a)(this,t),Object(j.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(O.a)(t,[{key:"run",value:function(e){this.props.addMap(e)}},{key:"clear",value:function(){this.props.clearMap()}},{key:"render",value:function(){var e=this,t=this.props.maps;return r.a.createElement("div",{id:"content",style:A.content},r.a.createElement(ge,{maps:t}),r.a.createElement(de,{maps:t,setGlobal:function(t){return e.props.setGlobal(t)},run:function(t){return e.run(t)},clear:function(){return e.clear()}}))}}]),t}(n.Component),V=Object(i.b)((function(e){return{seaLevel:e.heightmap.seaLevel,maps:e.heightmap.maps}}),(function(e){return{setGlobal:function(t){e(g.setGlobal(t))},addMap:function(t){e(g.addMap(t))},clearMap:function(){e(g.clearMap())}}}))(S),L=a(167),D={header:{padding:"1rem",background:M.background.header,color:M.color.header},brand:{float:"left",lineHeight:1.5},links:{float:"right"},link:{color:"inherit",textDecoration:"none"}},P="Zatlas - Online random heightmap generator.",_=[{label:"View Code on Github",url:"https://github.com/fralonra/zatlas",icon:r.a.createElement(L.a,{className:"icon-button"})}];var z=function(){return r.a.createElement("div",{style:D.header},r.a.createElement("div",{style:D.brand},P),r.a.createElement("div",{style:D.links},_.map((function(e){return r.a.createElement("a",{key:e.label,style:D.link,href:e.url},e.icon?e.icon:e.label)}))))},N={footer:{flex:"0 0 auto",padding:"0.75rem",background:M.background.footer,color:M.color.footer,fontSize:"75%",textAlign:"center"}},B=(new Date).getFullYear(),G=(n.Component,a(30)),T=a(41),R=a(168),I=a(82),W=function(e){var t={};return e.forEach((function(e){t[e]=String(e)})),t},F={wrapper:{display:"flex",flexWrap:"wrap",margin:"1rem 0",marginTop:"0.25rem"},desc:{padding:"0.5rem 0",fontSize:"1rem"},label:{fontSize:"1rem"},input:{width:"2rem",marginLeft:"0.5rem",marginRight:"1rem",textAlign:"center"}},J=["top-left","top-right","bottom-right","bottom-left"],Y=function(e){function t(e){var a;return Object(k.a)(this,t),(a=Object(j.a)(this,Object(w.a)(t).call(this,e))).state={corners:a.props.defaultValue},a}return Object(x.a)(t,e),Object(O.a)(t,[{key:"onChange",value:function(e,t){this.setState((function(a){var n=a.corners;return n[t]=Number(e),{corners:n}})),this.props.onChange(this.state.corners)}},{key:"render",value:function(){var e=this,t=this.props,a=t.desc,n=t.min,l=t.max,o=t.defaultValue;return r.a.createElement("div",null,r.a.createElement("div",null,"Corner"),r.a.createElement("div",{style:F.desc},a),r.a.createElement("div",{style:F.wrapper},J.map((function(t,a){return r.a.createElement("span",{key:t},r.a.createElement("label",{style:F.label},t),r.a.createElement("input",{className:"input",style:F.input,type:"number",min:n,max:l,value:o[a],onChange:function(t){return e.onChange(t.target.value,a)}}))}))))}}]),t}(n.Component);Y.defaultProps={min:1,max:10,defaultValue:[2,2,2,2]};var H=Y,q=a(83),Z=a.n(q),$=(a(104),function(e){function t(e){var a;return Object(k.a)(this,t),(a=Object(j.a)(this,Object(w.a)(t).call(this,e))).state={jimp:null,global:e.global},a.setJimp(e),a}return Object(x.a)(t,e),Object(O.a)(t,[{key:"setJimp",value:function(e){var t=this,a=e.map,n=e.range,r=e.global,l=a.length,o=r.seaLevel,i=r.colors;new Z.a(l,l,(function(e,c){var s=n-(o>0?o:0),u=s/(s>i.length?i.length-1:s);a.forEach((function(e,a){e.forEach((function(e,n){c.setPixelColor(t.colorize(e,Object(p.a)({interval:u},r)),a,n)}))})),c.crop(1,1,l-2,l-2),c.getBase64("image/png",(function(e,a){t.setState({jimp:a})}))}))}},{key:"colorize",value:function(e,t){var a=t.interval,n=t.seaLevel,r=t.colors;if(e<=n)return r[0];var l=Math.round((e-(n>0?n:0))/a);return l>r.length-1&&(l=r.length-1),r[l]}},{key:"componentWillReceiveProps",value:function(e){this.setJimp(e)}},{key:"render",value:function(){var e=this.props,t=e.style,a=e.onClick,n=this.state.jimp;return r.a.createElement("div",{className:"heightmap-wrapper",style:t},r.a.createElement("img",{className:"heightmap-map",src:n,onClick:function(){return a(n)},alt:""}))}}]),t}(n.Component));$.defaultProps={onClick:function(e){}};var K=$,Q={scene:{display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:0,left:0,bottom:0,right:0,background:"#000000cc",zIndex:999,overflow:"auto"},wrapper:{maxWidth:"100%",maxHeight:"100%"},info:{color:"#eeeeee"},image:{margin:"auto"}},U="Click anywhere to close.";function X(e){var t=e.style,a=e.src,n=e.alt,l=e.onClick;return r.a.createElement("div",{style:Object(p.a)({},t,{},Q.scene),onClick:l},r.a.createElement("div",{style:Q.wrapper},r.a.createElement("p",{style:Q.info},U),r.a.createElement("img",{style:Q.image,src:a,alt:n})))}X.defaultProps={alt:"image-scene"};var ee=X,te=a(84),ae=a.n(te);function ne(e){var t=this.props,a=t.label,n=t.min,l=t.max,o=t.defaultValue,i=t.marks;return r.a.createElement("div",null,r.a.createElement("span",null,a),r.a.createElement(ae.a,{min:n,max:l,defaultValue:o,marks:i}))}ne.defaultProps={min:0,max:10,defaultValue:5};var re=a(87),le=a(85),oe=a.n(le),ie={slider:{marginBottom:"2rem"},desc:{padding:"0.5rem 0",fontSize:"1rem"}};function ce(e){var t=e.label,a=e.desc,n=Object(re.a)(e,["label","desc"]);return r.a.createElement("div",{style:ie.slider},r.a.createElement("div",{style:ie.label},t),r.a.createElement("div",{style:ie.desc},a),r.a.createElement(oe.a,n))}ce.defaultProps={min:0,max:10,defaultValue:5};var se=ce,ue=void 0,me={panel:{display:"flex",flexFlow:"column",background:M.background.panel,color:M.color.panel,fontSize:"1.25rem",overflowY:"auto"},controller:{display:"flex",flexFlow:"row",justifyContent:"space-between",flex:"0 0 auto",padding:"1rem"},main:{flex:1,height:"100%",padding:"1rem",overflowY:"auto"},mainHidden:{display:"none"},desc:{padding:"0.5rem 0",paddingBottom:"1rem",fontSize:"1rem"},options:{marginTop:"2rem"}},pe={power:{type:"slider",label:"Power",desc:r.a.createElement("span",null,"Determine the size of the map. The map will be as large as 2",r.a.createElement("sup",null,r.a.createElement("i",null,"power")),"x2",r.a.createElement("sup",null,r.a.createElement("i",null,"power")),"."),min:7,max:11,defaultValue:9,marks:W([7,8,9,10,11]),onChange:function(e){ue.setValue("power",e.value)}},corner:{type:"corner",desc:"Determine the heights of four corners. They are initial values in diamond-square algorithm.",min:1,defaultValue:[2,2,2,2],onChange:function(e){ue.setValue("corner",e.value)}},offset:{type:"slider",label:"Offset",desc:"Designed to effect the overall height of the map.",min:-.9,max:.9,step:.1,defaultValue:.2,marks:W([-.9,-.5,-.2,0,.2,.5,.9])},range:{type:"slider",label:"Range",desc:"All the height values in the map will be within -range to range.",min:3,max:10,defaultValue:7,marks:W([3,4,5,6,7,8,9,10])},rough:{type:"slider",label:"Rough",desc:"Designed to effect the terrain variability (roughness).",min:.1,max:.9,step:.1,defaultValue:.8,marks:W([.1,.2,.3,.4,.5,.6,.7,.8,.9])}},fe={maxMapCount:{type:"input",label:"Max Map Count",desc:"The max number of maps in this page.",min:12,max:50,defaultValue:12},br:{type:"br"},seaLevel:{type:"slider",label:"Sea Level",desc:"The height of sea level.",min:0,max:10,marks:W([0,1,2,3,4,5,6,7,8,9,10]),defaultValue:1}},de=function(e){function t(e){var a;return Object(k.a)(this,t),(a=Object(j.a)(this,Object(w.a)(t).call(this,e))).state={hidden:!1,maxMapCount:12,power:pe.power.defaultValue,corner:pe.corner.defaultValue,offset:pe.offset.defaultValue,range:pe.range.defaultValue,rough:pe.rough.defaultValue},a.main=a.main.bind(Object(T.a)(a)),a}return Object(x.a)(t,e),Object(O.a)(t,[{key:"setValue",value:function(e,t){this.setState(Object(G.a)({},e,t))}},{key:"run",value:function(){var e=this.props,t=e.maps,a=e.run;if(t.length>=this.state.maxMapCount)return alert("Maximum number of maps exceeded. You can delete some maps first.");var n=this.state,r=n.power,l=n.corner,o=n.offset,i=n.range,c=n.rough;a({raw:Object(I.ds)(r,{corner:l,offset:o,range:i,rough:c}),factor:{power:r,corner:l,offset:o,range:i,rough:c}})}},{key:"clear",value:function(){var e=this.props,t=e.maps,a=e.clear;t.length>0&&a()}},{key:"toggle",value:function(){this.setState((function(e){return{hidden:!e.hidden}}))}},{key:"main",value:function(){var e=this;return r.a.createElement("div",{id:"panel-main",style:this.state.hidden?Object(p.a)({},me.main,{},me.mainHidden):me.main},r.a.createElement("small",{className:"warning"},"Scroll down if you cannot see all options."),r.a.createElement("fieldset",{style:me.options},Object.keys(pe).map((function(t){var a=pe[t];switch(a.onChange=function(a){return e.setValue(t,a)},a.type){case"slider":return r.a.createElement(se,Object.assign({key:t},a));case"corner":return a.max=e.state.range,r.a.createElement(H,Object.assign({key:t},a));default:return null}}))),r.a.createElement("fieldset",{style:me.options},Object.keys(fe).map((function(t){var a=fe[t];switch(a.onChange=function(a){return e.props.setGlobal(Object(G.a)({},t,a))},a.type){case"br":return r.a.createElement("br",{key:t});case"slider":return r.a.createElement(se,Object.assign({key:t},a));case"input":return a.defaultValue=e.state.maxMapCount,r.a.createElement("div",{key:t},r.a.createElement("div",null,a.label),r.a.createElement("div",{style:me.desc},a.desc),r.a.createElement("input",{className:"input",type:"number",min:a.min,max:a.max,value:a.defaultValue,onChange:function(t){return e.setValue("maxMapCount",t.target.value)}}));default:return null}}))))}},{key:"render",value:function(){var e=this,t=this.main;return r.a.createElement("div",{id:"panel",style:me.panel},r.a.createElement("div",{style:me.controller},r.a.createElement("div",null,r.a.createElement("button",{id:"panel-controller-button-run",className:"button panel-controller-button",style:me.buttonRun,onClick:function(){return e.run()}},"Generate!"),r.a.createElement("button",{id:"panel-controller-button-clear",className:"button panel-controller-button",style:me.buttonClear,onClick:function(){return e.clear()}},"Clear")),r.a.createElement(s.a,{maxDeviceWidth:C.cssMediaBp[0]},r.a.createElement(R.a,{className:"icon-button",onClick:function(){return e.toggle()}}))),r.a.createElement(t,null))}}]),t}(n.Component),he={showcase:{display:"flex",flexWrap:"wrap",alignItems:"start",textAlign:"center",overflowY:"auto"},intro:{display:"flex",flexFlow:"column",alignItems:"center",width:"100%",padding:"1rem",color:"#565656",fontWeight:"bold"},introDetail:{textAlign:"left"}};var ge=function(e){var t=e.maps;return r.a.createElement("div",{id:"showcase",style:he.showcase},0===t.length&&r.a.createElement("div",{className:"showcase-info",style:he.intro},r.a.createElement("p",{style:he.introTitle},"INTRO"),r.a.createElement("p",{style:he.introDetail},"A random heightmap generator using diamond-square algorithm.",r.a.createElement("br",null),"Click on the right to start your trip.")),t.map((function(e,t){return r.a.createElement("div",{key:t,className:"showcase-case",style:he.case},r.a.createElement(ye,{index:t,map:e}))})))},be={case:{padding:"0.5rem 1rem",cursor:"zoom-in"},info:{textAlign:"left"}},ve=function(e){function t(e){var a;return Object(k.a)(this,t),(a=Object(j.a)(this,Object(w.a)(t).call(this,e))).state={global:e.global,imageScene:!1,imageSceneSrc:""},a}return Object(x.a)(t,e),Object(O.a)(t,[{key:"toggleImageScene",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setState((function(t){return{imageScene:!t.imageScene,imageSceneSrc:e}}))}},{key:"delete",value:function(){this.props.delMap(this.props.index)}},{key:"render",value:function(){var e=this,t=this.props,a=t.style,n=t.map,l=t.global,o=this.state,i=o.imageScene,c=o.imageSceneSrc,s=n.factor;return r.a.createElement("div",{style:Object(p.a)({},a,{},be.wrapper)},i&&r.a.createElement(ee,{src:c,onClick:function(){return e.toggleImageScene("")}}),r.a.createElement(K,{style:be.case,map:n.raw,range:s.range,global:l,onClick:function(t){return e.toggleImageScene(t)}}),r.a.createElement("button",{onClick:function(){return e.delete()}},"Delete"),r.a.createElement("div",{style:be.info},r.a.createElement("ul",null,Object.keys(s).map((function(e,t){return r.a.createElement("li",{key:t},e,": ",Array.isArray(s[e])?s[e].join(", "):s[e])})))))}}]),t}(n.Component),ye=Object(i.b)((function(e){return{global:e.heightmap.global}}),(function(e){return{delMap:function(t){e(g.delMap(t))}}}))(ve),Ee={app:{display:"flex",flexFlow:"column",height:"100%",overflow:"hidden"}};var ke=function(){return r.a.createElement(i.a,{store:E},r.a.createElement("div",{style:Ee.app},r.a.createElement(s.a,{minDeviceWidth:C.cssMediaBp[0]},r.a.createElement(z,null)),r.a.createElement(V,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ke,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},89:function(e,t,a){e.exports=a(166)},95:function(e,t,a){}},[[89,1,2]]]);
//# sourceMappingURL=main.89759046.chunk.js.map